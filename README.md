# TL :: Описание и техническая информация по проекту

## Содержание

* [1 Введение](#1-Введение)
* [2 Миссия](#2-Миссия)
* [3 Функциональные возможности и особенности](#3-Функциональные-возможности-и-особенности)
* [4 Этапы развития проекта](#4-Этапы-развития-проекта)
* [5 Монетизация](#5-Монетизация)
* [6 Физическая архитектура](#6-Физическая-архитектура)
  * [6.1 Сервисы](#61-Сервисы)
    * [6.1.1 Клиентская часть](#611-Клиентская-часть)
      * [6.1.1.1 Web-версия (`tl-web`)](#6111-Web-версия-tl-web)
      * [6.1.1.2 Мобильное приложение iOS/Android (`tl-app`)](#6112-Мобильное-приложение-iOSAndroid-tl-app)
    * [6.1.2 Серверная часть](#612-Серверная-часть)
      * [6.1.2.1 Узел публичного шлюза - **TL API** (`tl-api`)](#6121-Узел-публичного-шлюза---TL-API-tl-api)
      * [6.1.2.2 Узел производительного сервера - **TL SERVER** (`tl-srv`)](#6122-Узел-производительного-сервера---TL-SERVER-tl-srv)
      * [6.1.2.3 Узел репликации/трансляции данных - **TL DB WRAPPER** (`tl-dbw`)](#6123-Узел-репликациитрансляции-данных---TL-DB-WRAPPER-tl-dbw)
      * [6.1.2.4 Очередь задач узлам производительных серверов - **RabbitMQ for TL SERVER** (`tl-que`)](#6124-Очередь-задач-узлам-производительных-серверов---RabbitMQ-for-TL-SERVER-tl-que)
  * [6.2 Взаимодействие](#62-Взаимодействие)
* [7 Логическая архитектура](#7-Логическая-архитектура)

***

## 1 Введение

**TL** (аббривеатура от **T**echno**L**ogic - *бывш. Технологика*) - это совокупная система микросервиосов, работающих вместе с целью формирования высоконагруженной отказоустойчивой распределенной системы интерактивного тестирования для проведения интеллектуально-развлекательных личных и командных состязаний.
***

## 2 Миссия

...
***

## 3 Функциональные возможности и особенности

...
***

## 4 Этапы развития проекта

...
***

## 5 Монетизация

...
***

## 6 Физическая архитектура

...

### 6.1 Сервисы

...

#### 6.1.1 Клиентская часть

...

##### 6.1.1.1 Web-версия (`tl-web`)

>Angular CLI, JSON

...

##### 6.1.1.2 Мобильное приложение iOS/Android (`tl-app`)

>Xamarin, JSON

...

#### 6.1.2 Серверная часть

...

##### 6.1.2.1 Узел публичного шлюза - **TL API** (`tl-api`)

>.NET Core, JSON, gRPC, RabbitMQ

...

>**УЗЛЫ ЭТОГО МИКРОСЕРВИСА ИМЕЮТ ДОСТУП И К ГЛОБАЛЬНОЙ И К ПРИВАТНОЙ ЛОКАЛЬНОЙ СЕТЯМ**

##### 6.1.2.2 Узел производительного сервера - **TL SERVER** (`tl-srv`)

>C++, RabbitMQ, gRPC

Микросервис `tl-srv` представляет собой узел обработки данных, требующих производительных серверных вычислений. `tl-srv` работает в тесной связке с `tl-que` и `tl-dbw`. Каждый узел микросервиса `tl-srv` подписывается на очередь входящих задач `tl-que`, реализованную на RabbitMQ. Каждая полученная задача регистрируется в хранилище данных `tl-dbw` в состоянии `In Progress`, по завершению состояние изменяется на `Done`. Микросервисы `tl-srv` и `tl-dbw` общаются между собой по протоколу gRPC.

>**УЗЛЫ ЭТОГО МИКРОСЕРВИСА ЛЕЖАТ В ПРИВАТНОЙ ЛОКАЛЬНОЙ СЕТИ И НЕ ИМЕЮТ ФИЗИЧЕСКОГО ДОСТУПА В ГЛОБАЛЬНУЮ СЕТЬ**

##### 6.1.2.3 Узел репликации/трансляции данных - **TL DB WRAPPER** (`tl-dbw`)

>C++, gRPC, SQLServer, PostgreSQL и возможно ClickHouse

Микросервис `tl-dbw` представляет собой транслятор конечного числа задекларированных форматов запросов/задач от `tl-api` и `tl-srv` в "сырые" SQL запросы к базе, а так же конфигурируется для работы с несколькими СУБД, которые могут быть развёрнуты на удалённых машинах. Предполагается полная репликация данных за счёт использвания кэша запросов и цепочечной структуры подключения узлов `tl-dbw`.

Подразумевается, что для каждого задекларированного формата запросы/задачи этот сервис содержит персональную реализацию трансляции для каждой поддерживаемой СУБД.

Read-only запросы выполняются на самой быстрой для этого запроса СУБД. Задачи на **любую** модификацию данных выполняются во всех СУБД параллельно.

>После запуска `tl-dbw` в том числе некоторое время выполняет и read-only запросы во всех СУБД с целью собрать статистику производительности. После накопления этой статистики по определённому запросу, он начинает выполнять данный запрос исключительно в самой производительной для него СУБД. Если по каким-то причинам время ответа СУБД с течением времени начинает заметно расти - `tl-dbw` примет решение обновить статистику.

...

>**УЗЛЫ ЭТОГО МИКРОСЕРВИСА ЛЕЖАТ В ПРИВАТНОЙ ЛОКАЛЬНОЙ СЕТИ И НЕ ИМЕЮТ ФИЗИЧЕСКОГО ДОСТУПА В ГЛОБАЛЬНУЮ СЕТЬ**

##### 6.1.2.4 Очередь задач узлам производительных серверов - **RabbitMQ for TL SERVER** (`tl-que`)

>RabbitMQ

...

>**УЗЛЫ ЭТОГО МИКРОСЕРВИСА ЛЕЖАТ В ПРИВАТНОЙ ЛОКАЛЬНОЙ СЕТИ И НЕ ИМЕЮТ ФИЗИЧЕСКОГО ДОСТУПА В ГЛОБАЛЬНУЮ СЕТЬ**

### 6.2 Взаимодействие

Идеология взаимодействия строится вокруг принципа, что все запросы к системе можно поделить на два типа:

1. **только** получение данных, т.е. без любых операций добавления/изменения;
2. все остальные.

...
***

## 7 Логическая архитектура

### 7.1 Сущности

...
***
